{% extends "base.html" %}

{% block content %}
<div class="container my-4">

  <!-- Заголовок дня -->
  <h3 class="text-center mb-4 fw-bold">{{ day }} - Тренировка</h3>

  <!-- Форма добавления подхода -->
  <div class="card shadow-sm mb-3 hover-scale">
    <div class="card-body">
      <form method="post">
        <!-- Выбор упражнения -->
        <div class="mb-3">
          <label class="form-label">Упражнение</label>
          <select class="form-select" name="exercise" required>
            {% for ex in exercises %}
            <option value="{{ ex }}" {% if ex == last_exercise %}selected{% endif %}>{{ ex }}</option>
            {% endfor %}
          </select>
        </div>

        <!-- Вес и повторения -->
        <div class="mb-3 row">
          <div class="col">
            <label class="form-label">Вес (кг)</label>
            <input type="number" step="0.5" class="form-control" name="weight" placeholder="100">
          </div>
          <div class="col">
            <label class="form-label">Повторы</label>
            <input type="number" class="form-control" name="reps" placeholder="5">
          </div>
        </div>

        <!-- Сохранить подход -->
        <button type="submit" class="btn btn-primary w-100 shadow-sm">
          <i class="bi bi-check-lg"></i> Сохранить подход
        </button>
      </form>

      <!-- Быстрая кнопка +1 подход -->
      <form method="post" class="mt-2">
        <input type="hidden" name="quick" value="1">
        <button class="btn btn-outline-success w-100 shadow-sm">
          <i class="bi bi-plus-lg"></i> +1 подход
        </button>
      </form>
    </div>
  </div>

  <!-- История подходов -->
  <h5 class="mb-3 fw-semibold">История</h5>
  {% for log in logs %}
  <div class="card mb-2 shadow-sm hover-scale">
    <div class="card-body d-flex justify-content-between align-items-center">
      <div>
        <b>{{ log['exercise'] }}</b><br>
        <span class="text-muted">{{ log['weight'] or 0 }} кг × {{ log['reps'] or 0 }}</span><br>
        <small class="text-secondary">{{ log['date'] }}</small>
      </div>
      <!-- Кнопка удаления -->
      <form method="post" action="/delete/{{ log['id'] }}">
        <button type="submit" class="btn btn-danger btn-sm shadow-sm">
          <i class="bi bi-trash"></i>
        </button>
      </form>
    </div>
  </div>
  {% endfor %}

  {% if not logs %}
  <p class="text-center text-muted mt-3">Пока нет записей</p>
  {% endif %}

</div>

<!-- Эффекты карточек -->
<style>
.hover-scale {
  transition: transform 0.2s, box-shadow 0.2s;
}
.hover-scale:hover {
  transform: translateY(-3px) scale(1.02);
  box-shadow: 0 6px 15px rgba(0,0,0,0.2);
}
</style>

{% endblock %}
